var getLayers=function(){console.log("Loading Layers");var a={action:"getLayers"};jQuery.ajax(url_base+"/application/controller/layers.php",{type:"post",data:a,success:function(a){cHotelData=jQuery.parseJSON(a),setDefaultLayers(),renderLayers()},error:function(a){console.log("Error! getLayers",a)}})},populateLayersContainer=function(){_.each(layers,function(a,b){var c=jQuery("<a/>");c.addClass("layer-btn ui basic yellow fluid button"),c.data("name",b),jQuery(c).append('<div class="legend-item"><img src="_assets/img/icn-map-'+b+'.png" /><p>'+a.name+'<br /><span class="minor">'+a.location+"</span></p></div>"),jQuery(c).click(function(){toggleLayer(jQuery(this).data("name"))}),jQuery("#layers-container").append(c)})},setDefaultLayers=function(){layers.nsa.active=!0},renderLayers=function(){jQuery(".layer-btn").each(function(a){var b=jQuery(this).data("name");layers[b].active===!0?(jQuery(this).addClass("active"),renderGeoMarkers(layers[b].type)):(jQuery(this).removeClass("active"),removeGeoMarkers(layers[b].type))}),jQuery("#num-active-layers").text(_.filter(layers,{active:!0}).length+" LAYERS")},toggleLayer=function(a){layers[a].active===!0?layers[a].active=!1:layers[a].active===!1&&(layers[a].active=!0),renderLayers()};